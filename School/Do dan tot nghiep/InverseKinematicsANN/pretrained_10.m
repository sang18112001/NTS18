function [Y,Xf,Af] = pretrained_10(X,~,~)
%PRETRAINED_10 neural network simulation function.
%
% Auto-generated by MATLAB, 28-Nov-2023 16:45:48.
% 
% [Y] = pretrained_10(X,~,~) takes these arguments:
% 
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = 3xQ matrix, input #1 at timestep ts.
% 
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = 3xQ matrix, output #1 at timestep ts.
% 
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0.050015307656058;0;-6.28996925726433e-06];
x1_step1.gain = [9.52646325174905;13.3344725140591;8.00048668041704];
x1_step1.ymin = -1;

% Layer 1
b1 = [5.6309381249802568092;5.6404225332371611401;4.7393993928793856085;5.3885532812966143723;4.1426762548985980317;3.1626626933339130332;3.2826393208455355577;4.0876707599066177679;-3.4258620724660562296;7.7288947105373244639;-3.4314375586993381972;2.4986480586638668555;2.8307581604176732526;-2.9057330595843304799;1.4745022971804830902;-2.1217877685911474828;-1.7577530008480066748;-1.4543347058607212219;0.89616223509255077406;-0.53416011271633279112;-0.71876320582385389013;-1.8619509164777652277;-0.40685977218195346072;0.17214130451235651331;1.2869147089841417309;0.42245846140964815607;0.46692184834581790254;-1.7665457051038351288;0.00024982698223410218941;0.88694605697085260321;-2.6479325586374842239;-1.3504928757600171974;0.97118824516411139669;-1.610364806674627447;1.6465761677407397823;-2.096007793788602136;1.7074682358268900018;2.5599207118678064532;-1.5967456624793636699;2.4465722898354029802;-3.2932464016159879172;-3.8466214306773953702;-2.7704183333981262649;3.4962936172538832125;-3.1743773148762310932;-3.0621595146172704283;4.1242449098404581065;-4.4279722800122485182;4.1814019041692747081;4.7299144513927071642];
IW1_1 = [-2.157279623584661632 1.083471219212305936 -3.6064854730793634019;-2.7081421523513031779 -0.15573235993683992584 -3.8724843444258483238;-0.01524935031685721934 4.2876951689049844774 -0.66948097476021128927;-3.3937754926360454988 -2.5763230384480833024 0.90273028106637931423;-0.92557870186177415572 -3.6672953114923307893 2.6129292325898783034;-1.4274308431275370967 -2.54533744752442459 2.2212353115291225691;-2.6720588248424892441 -3.9877906135126681697 3.9215057141621163517;-2.9443329918991270056 -3.550547957253310738 -0.93479658781746588492;1.6696424150485089655 3.4451115085823489359 3.4555354035410581481;-11.450236332411481754 -5.5944375692312036108 -1.3966446999461303857;3.7093966487888625494 2.9674697204915108095 1.9583081488409714854;-0.90921131390247167392 2.6700878077602521188 1.8543584958128842555;0.19501221736369953041 3.4411884582038569924 -2.33677259322497477;1.0146333235557896124 2.4396723762250087653 -3.6022090551816492443;-2.2631170778752549566 -1.7527890120201061741 0.58340849029553731864;1.2236163619498594546 -2.8779609920726567651 1.983240332944535389;1.9310406593521289853 -3.7160854214781409155 -2.6351474440441586822;3.6379862216049332346 1.3299547349582458988 -0.89858916367061636432;-1.1790746581942121995 -0.030644742591094020073 1.372421817783216369;1.1073672016356437275 0.7553379307180675406 2.1661136388905601891;1.0837321547219418427 0.65670121884491206021 2.0385247988571570943;3.0361352243515797866 -0.74234393858421987566 -0.56948520746409059257;1.4549490671355480575 -3.3342575791370836491 -1.0353838748148387339;2.6630330599294449456 3.9620321582046060804 -0.45803563660447493833;-3.3158663372375083433 5.0850401695836291438 0.17889092723837421439;2.2504108093752432929 -3.9584381629608742514 5.1419568936667756631;2.0006780329914701788 3.1381590174263118698 1.6731541594476213586;3.3171089141474778828 2.7138274753250519744 2.0377973883981299608;-1.6990156629444219671 -2.7570831556167139098 -1.0454938000632900685;2.1040686643287314084 -0.85246625618845284222 -3.8644329828726342591;-2.0713941374818785057 3.2982547399963122459 1.3185161017558193475;-2.3248299265436087602 2.9956696673829426025 -5.0682074881610903461;1.1676324500177257537 3.3269423062453480355 -1.430220859911360165;-1.7610800840551681379 -0.11419000723836261746 2.2206781400959330064;0.86952975189179337878 1.4430096067188453723 -2.0147874241894099256;-3.7975977308597883564 -1.2497728920994632951 -1.3914849033744165485;3.6228968494033200187 -0.1097184673337811972 -1.4043941826905168568;2.1648307693785970862 -3.5819212095885770708 -1.6930209918300620497;-2.607006473253780765 3.707226846339906956 -3.8973132768438496498;3.7898144925262506888 3.7131855591355251711 -0.63593999183241711748;-2.7121218270447093879 2.3173301476011367583 -2.4626705403038093856;-1.6052686818754993148 -3.613955639164439404 0.655366587254711086;-1.2678512631216745099 3.155255328983811669 -3.3809934313178531262;1.9021293154492480149 -3.2120376611413323786 1.8149727793188434877;-1.3370960879286686307 2.4712770159784804846 -2.0132360719839761387;-2.5359249416524147769 -0.87166749665339793296 1.1464895980056055702;3.3241010360846177107 -1.4082212848781585635 0.072117736307362859116;-1.0046622596329966015 -3.7249639288314648766 -1.5748770996355361262;2.6920557908036446548 2.0722984136562865309 -0.90308468701913402477;2.8165140739845457851 2.6765706380144034249 -0.70132359975442204458];

% Layer 2
b2 = [0.50056024866816151153;-0.065983672804870580064;1.8400203267583499223];
LW2_1 = [-0.01469783479141494216 -0.45530677041918909964 -0.0011696632618287019882 0.83376794133410847554 -0.0036330199042867638778 0.30443917035494166834 0.053422590229700882281 -0.26246378306668061153 -0.41660750125269691013 0.00072558201700858400082 1.1187503660406841188 -0.017516647752534090371 -0.00069653094014652443353 -0.33092363707594085742 0.085073973986631218347 -0.0053766751669383503268 0.00052017392352182723059 -0.0042105784333340556813 -0.00082080759393855567616 0.011001008968918131112 -0.012566541140364283213 -0.0045318665936060044744 0.0066852923178956002656 0.023535594152378110089 -0.0022912139581754615604 0.027776897892360864067 -0.08925241396044895914 -0.092068645938947368812 -0.29025555098278255084 -0.00064254819994265558684 0.62496402406194662138 0.024844104132759975423 0.062840835451258875155 -0.0019831357483853502381 -0.010552866722752218473 0.00046109384484158756927 0.00039967462790248422079 0.45290946591023656387 0.018766671293512157681 0.00057335970170556253573 -0.23389978829780941338 0.0074432728808209057056 0.75141035642585130017 0.28304620610250880164 0.92137052886196058044 -0.018018219645340796675 -0.15435739567766959546 -0.011922880699892673614 -0.029594090703549260496 0.0099758918498428529598;-1.0914765183179746533 -1.3043592935474479511 1.8661200767784917876 -0.72029159134241282914 -0.036985685131489781652 0.19000134329813084255 -0.84814130080564598124 -0.52805823084250624877 0.7565852546373039722 1.783167502512443825 0.59552659374138317006 0.81395699162974899377 -0.067504670315960135785 0.11864426002142994254 0.013571373345160606116 -0.46849848696671431147 0.2024300941294958911 -0.034758046117679207432 0.25900292278271108692 0.66328061865123377761 -0.65934643964045802633 -0.074499333853092208901 -0.23237596091280723898 -0.84150978555187483376 0.23995935128030559946 -1.3873789703265420048 -0.16565631489282800493 -0.53417959324248609487 -0.36456684788636661843 0.040550656425286053797 -0.45177329635981361422 -1.3774033403028691502 -0.46275618532170786912 0.4357149851296657217 0.48346787529301316066 0.0038401484246373901801 0.0046533256956214326741 -0.36140567607510282189 -0.83792219310437809909 0.023879943405271056994 0.076504272551279589587 0.18075850651786706802 -1.0378861685499458645 0.025757273450278724697 -0.11590483734837705998 1.0982982232051210492 -0.0029740410184499774075 -0.96204883879461267071 1.582806269613283856 -0.74923491843938405665;-0.029198204696666937852 0.95108161202140895085 -1.4306482574470296143 0.68690915054247314586 0.045900342387178348635 -0.075013619981236748235 1.3307239799004240144 0.41631961733833200423 -0.67065549440303495743 -2.8445761480321261061 -1.058861872738593668 -0.94615234128445302453 -0.042249735209850598772 0.16341879928695809965 -0.086579724912992192531 0.021370160437020613298 -0.075005489334159583525 0.052076052464934775854 -0.23850286538649373425 -0.19982252558589258529 0.31391204596787969372 0.1292187457205725698 0.079999357105904125853 1.3625976006320414946 -0.022166261429608986877 0.011253443589712584447 -0.07971811323894067991 0.77869486092911532893 -0.11711014605511302356 -0.016183288969136212787 0.46873878826689169275 0.021267254848936979067 0.39071548706941289231 -0.13703999922087486962 -0.74861165899691639591 -0.0010464185515828971097 0.007515333513666993398 0.37669279726453380741 0.036299142224051665628 -0.048318437368611022453 0.021305525931930524575 -0.17115568895315833031 0.630364511086716095 -0.03974301155086749221 -0.040538096638870958766 -0.13563054618776176907 0.0059357683246076967457 0.04867713026399909243 -0.08358234174822637419 0.029167107230632070142];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [1.74403571741344;0.964569502683839;0.800698620563121];
y1_step1.xoffset = [0;0.208258648908721;-2.74702687782755];

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
  X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
  Q = size(X{1},2); % samples/series
else
  Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS

    % Input 1
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
  Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
